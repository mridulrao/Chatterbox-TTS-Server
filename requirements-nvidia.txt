# requirements-nvidia.txt (For NVIDIA GPU Installation)
#
# NOTE:
# - chatterbox-tts pins torch==2.6.0, so we align torch/vision/audio.
# - Keep PyTorch wheels as an *extra* index (do NOT replace PyPI).

# ------------------------------------------------------------
# PyTorch CUDA wheel index (cu124)
# ------------------------------------------------------------
--extra-index-url https://download.pytorch.org/whl/cu124

# ------------------------------------------------------------
# Torch stack (aligned with chatterbox-tts expectations)
# ------------------------------------------------------------
torch==2.6.0
torchvision==0.21.0
torchaudio==2.6.0

# ------------------------------------------------------------
# Resolver "branch killers" (prevents resolution-too-deep)
# ------------------------------------------------------------
# Torch wants typing-extensions>=4.10; pin a modern version to stop backtracking
typing-extensions==4.14.1

# Uvicorn[standard] uses websockets; pin to avoid solver iterating old 10.x sdists
websockets==16.0

# ------------------------------------------------------------
# CRITICAL dependency pins (prevents ONNX source build)
# ------------------------------------------------------------
numpy==1.26.4
onnx==1.19.1
s3tokenizer==0.2.0

# ------------------------------------------------------------
# Chatterbox TTS engine (your fork)
# ------------------------------------------------------------
chatterbox-tts @ git+https://github.com/mridulrao/chatterbox.git@master

# ------------------------------------------------------------
# Core Web Framework (PINNED)
# ------------------------------------------------------------
fastapi==0.128.0
uvicorn[standard]==0.40.0

# ------------------------------------------------------------
# ML & Audio Libraries (PINNED)
# ------------------------------------------------------------
soundfile==0.13.1
librosa==0.11.0
safetensors==0.7.0
descript-audio-codec==1.0.0

# ------------------------------------------------------------
# Configuration & Utilities (PINNED)
# ------------------------------------------------------------
PyYAML==6.0.3
python-multipart==0.0.22
requests==2.32.5
Jinja2==3.1.6
watchdog==6.0.0
aiofiles==25.1.0
unidecode==1.4.0
inflect==7.5.0
tqdm==4.67.1
hf_transfer==0.1.9

# ------------------------------------------------------------
# Audio Post-processing (PINNED)
# ------------------------------------------------------------
pydub==0.25.1
audiotsm==0.1.2
praat-parselmouth==0.4.7
