# requirements-nvidia.txt (For NVIDIA GPU Installation)
#
# Goal:
# - Match chatterbox-tts==0.1.6 dependency pins exactly (from pyproject.toml)
# - Keep installs deterministic (avoid pip resolution-too-deep)
# - Use CUDA wheels for PyTorch (cu124) while still resolving everything else from PyPI

# ------------------------------------------------------------
# PyTorch CUDA wheel index (cu124) - keep as EXTRA index
# ------------------------------------------------------------
--extra-index-url https://download.pytorch.org/whl/cu124

# ------------------------------------------------------------
# Torch stack (MUST match chatterbox-tts 0.1.6)
# ------------------------------------------------------------
torch==2.6.0
torchaudio==2.6.0
torchvision==0.21.0

# ------------------------------------------------------------
# Resolver stabilizers (reduce backtracking / resolution-too-deep)
# ------------------------------------------------------------
# Torch requires typing-extensions>=4.10; pin a modern wheel
typing-extensions==4.14.1

# Uvicorn/gradio chains often explore many websockets versions; pin a modern wheel
websockets==12.0

# Avoid old invalid-metadata uvicorn versions dragging click weirdness
click==8.1.7

# ------------------------------------------------------------
# chatterbox-tts core deps (mirror pyproject.toml pins)
# ------------------------------------------------------------
numpy==1.26.4
librosa==0.11.0
s3tokenizer==0.2.0

transformers==4.46.3
diffusers==0.29.0

resemble-perth==1.0.1
conformer==0.3.2
safetensors==0.5.3

spacy-pkuseg==0.0.33
pykakasi==2.3.0
gradio==5.44.1
pyloudnorm==0.1.1
omegaconf==2.3.0

# ------------------------------------------------------------
# Chatterbox TTS engine (your fork)
# ------------------------------------------------------------
chatterbox-tts @ git+https://github.com/mridulrao/chatterbox.git@master

# ------------------------------------------------------------
# Server dependencies (pin to avoid resolver churn)
# ------------------------------------------------------------
fastapi==0.115.6
uvicorn[standard]==0.40.0
python-multipart==0.0.12
requests==2.32.3
PyYAML==6.0.2
Jinja2==3.1.4
watchdog==6.0.0
aiofiles==24.1.0
unidecode==1.3.8
inflect==7.4.0
tqdm==4.67.1
hf_transfer==0.1.9

# ------------------------------------------------------------
# Audio libs / post-processing
# ------------------------------------------------------------
soundfile==0.13.1
descript-audio-codec==1.0.0
pydub==0.25.1
audiotsm==0.1.2
praat-parselmouth==0.4.7
